<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Jupyter Scaled</title>
  <script>
    function getParams() {
      const urlParams = new URLSearchParams(window.location.search)
      return {
        zoom: parseFloat(urlParams.get("zoom")) || 0.75,
        notebook: urlParams.get("notebook") || "", // relative path
        useLab: urlParams.get("lab") === "true",   // force lab view if desired
      }
    }

    const { zoom, notebook, useLab } = getParams()

    const styleTag = document.createElement('style')
    styleTag.textContent = `
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
      }
      .scaled-frame {
        transform: scale(${zoom});
        transform-origin: top left;
        width: calc(100% / ${zoom});
        height: calc(100% / ${zoom});
        border: none;
        display: block;
      }
    `
    document.head.appendChild(styleTag)

    window.addEventListener("DOMContentLoaded", () => {
      const iframe = document.createElement("iframe")

      let iframeSrc = "http://localhost:8888"
      if (notebook) {
        iframeSrc += useLab
          ? `/lab/tree/${notebook}`       // full JupyterLab UI
          : `/notebooks/${notebook}`      // minimal notebook view
      }

      iframe.className = "scaled-frame"
      iframe.src = iframeSrc
      document.body.appendChild(iframe)
    })
  </script>
</head>
<body></body>
</html>
